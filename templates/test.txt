def chatroom():
    #return render_template("login.html")

    rows = db.execute("SELECT username, messages FROM users WHERE username =?", session["user_id"])

    for row in rows:
        row["username"]
        row["messages"]

    return render_template("chatroom.html",rows=rows)

@app.route("/message", methods=["GET", "POST"])
def message():

    if request.method == "POST":

        rows = db.execute("SELECT * from users WHERE id = ?", session["user_id"])

        for row in rows:
            db.execute("INSERT INTO users (message) VALUES(?);", request.form.get("message"))

        for row in rows:
            row["username"]
            row["messages"]


        return render_template("chatroom.html", rows = rows)
    else:
        return render_template("test4.html")


new 28/11/2022
        # Go into current user's session id
        rows = db.execute("SELECT * FROM users WHERE id =?;", session["user_id"])

        # Insert into the id's respective message box to INSERT the message
        db.execute("INSERT INTO message (user_id, message) VALUES(?, ?);",session["user_id"], request.form.get("message"))

        # rows = db.execute("SELECT * from")
        username1 = db.execute("SELECT username FROM users;")
        message = db.execute("SELECT message FROM message;")
        people = db.execute("select id from users;")
        username = db.execute("select message from message where user_id = ?;", people)


        # # connect loop in HTML and PY
        return render_template("chatroom.html", rows=rows, username=username, username1=username1, message = message)

